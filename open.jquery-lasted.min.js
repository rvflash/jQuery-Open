(function(h){var d={type:{self:"self",blank:"blank",iframe:"iframe",ajax:"ajax"},popup:{height:780,width:420},onview:null,uniqueIdentifier:"unique"};var g={type:d.type.self,container:"body",ajax:{name:"_openviewer",loading:{name:"_opencharger",content:"Please be patient, loading ...",enable:true},error:{name:"_openfailure",content:"An error was occured. Please to retry later.",enable:true},displayInline:false,toggle:true},iframe:{name:"_openbrowser",options:{src:"",scrolling:"auto",frameborder:0},loading:{name:"_openloader",content:"Please be patient, loading ...",enable:true},displayInline:false,domMaxSize:5},popup:{scrollbars:"yes",toolbar:"yes",location:"yes",directories:"yes",menubar:"yes",resizable:"yes",status:"yes",top:0,left:0,height:780,width:420},onExit:null,autoload:false};var i=function(q,p){if(null==h(q).data("_openid")){h(q).data("_openid","_open"+Math.floor((Math.random()*1001)+1))}p.name=h(q).data("_openid");if(h(q).hasClass(d.type.self)){type=d.type.self}else{if(h(q).hasClass(d.type.blank)){type=d.type.blank}else{if(h(q).hasClass(d.type.iframe)){type=d.type.iframe}else{if(h(q).hasClass(d.type.ajax)){type=d.type.ajax}else{type=p.type}}}}if(null!=(url=n(q,p))){switch(type){case d.type.ajax:return j(url,p);case d.type.iframe:return m(url,p);case d.type.blank:return f(url,p);case d.type.self:default:return k(url,p)}}};var o=function(q,p){return n(q,p)};var j=function(p,q){a(q.name,q.ajax);if(0==h("#"+q.name).length){h("#"+q.ajax.name).append('<div id="'+q.name+'"></div>')}else{if(false==q.ajax.toggle){h("#"+q.ajax.name+" > div").hide()}}if(""==h("#"+q.name).html()){h("#"+q.name).hide().html(" ");return h.get(p,function(r){h("#"+q.name).html(r)}).success(function(){l(q.name,q.ajax,q.onExit)}).error(function(){if(q.ajax.error.enable){h("#"+q.ajax.error.name).show().delay(1000).hide()}})}return l(q.name,q.ajax,q.onExit)};var m=function(q,s){a(s.name,s.iframe);if(0==h("#"+s.name).length){var r=[];var p=h.extend({},s.iframe.options,{id:s.name});for(opts in p){r.push(opts+' = "'+p[opts]+'"')}var t=h("#"+s.iframe.name+" > iframe");if(s.iframe.domMaxSize<=t.length){t.filter(":first").remove()}h("#"+s.iframe.name).append("<iframe "+r.join(" ")+"></iframe>")}h("#"+s.iframe.name+" > iframe").hide();if(s.iframe.loading.enable){if(""==h("#"+s.name).attr("src")){return h("#"+s.name).attr("src",q).load(function(){l(s.name,s.iframe,s.onExit)})}}else{if(""==h("#"+s.name).attr("src")){h("#"+s.name).attr("src",q)}}return l(s.name,s.iframe,s.onExit)};var f=function(q,r){var p=r.popup;p.width=(screen.width*0.8);if(p.width<d.popup.height){r.popup.width=d.popup.height}p.height=(screen.height*0.8);if(p.height<d.popup.width){r.popup.height=d.popup.width}var s=[];for(opts in p){s.push(opts+"="+p[opts])}if(h.isFunction(r.onExit)){r.onExit(r.name)}return window.open(q,p.name,s.join(","))};var k=function(p,q){if(h.isFunction(q.onExit)){q.onExit(q.name)}return window.location.href=p};var c=function(q,r,p){r.preventDefault();i(q,p)};var a=function(q,p){d.onview=q;if(0==h("#"+p.name).length){h(document.body).append('<div id="'+p.name+'"></div>')}if(p.loading.enable){if(0==h("#"+p.loading.name).length){h(document.body).append('<div id="'+p.loading.name+'">'+p.loading.content+"</div>")}else{h("#"+p.loading.name).show()}}if("undefined"!=typeof p.error&&p.error.enable){if(0==h("#"+p.error.name).length){h(document.body).append('<div id="'+p.error.name+'">'+p.error.content+"</div>")}h("#"+p.error.name).hide()}};var l=function(q,p,r){if(d.onview!=q){return}if(p.loading.enable){h("#"+p.loading.name).hide()}if("undefined"!=typeof p.toggle&&p.toggle&&h("#"+q).is(":visible")){h("#"+q).hide()}else{if(p.displayInline){h("#"+q).show()}else{h("#"+q).css("display","block")}}if(h.isFunction(r)){r(q)}};var e=function(u){var r=new String();var q,p,v,t=new String();q="a";p="A";v="z";t="Z";var s=-1,w;while(s++<u.length-1){w=u.charCodeAt(s);if(w>=q.charCodeAt()&&w<=v.charCodeAt()){w=((w-q.charCodeAt()+13)%26)+q.charCodeAt()}else{if(w>=p.charCodeAt()&&w<=t.charCodeAt()){w=((w-p.charCodeAt()+13)%26)+p.charCodeAt()}}r+=String.fromCharCode(w)}return r};var n=function(q,p){if(null!=(url=b(q))){if(null!=h(q).data("arg")){url+=(-1!=url.indexOf("?")?"&":"?")+h(q).data("arg")}if(h(q).hasClass(d.uniqueIdentifier)){url+=(-1!=url.indexOf("?")?"&":"?")+"_i="+new Date().getTime()}}return url};var b=function(q){if("undefined"!==typeof h(q).attr("href")){return h(q).attr("href")}else{if("undefined"!==typeof h(q).data("url")){return h(q).data("url")}else{if("undefined"!==typeof h(q).data("erl")){return e(h(q).data("erl"))}else{if("undefined"!==typeof h(q).data("nrl")){var p=h(q).data("nrl");if(-1!==p.indexOf("uggc:")){return e(p)}return p}else{if("undefined"!==typeof h(q).data("irl")){return b(h("#"+h(q).data("irl")))}}}}}return null};h.getOpenUrl=function(q,p){return n(q,p)};h.openNode=function(q,p){if(typeof(p)==="undefined"){p={}}var p=h.extend({},g,p);return i(q,p)};h.open=function(q,p){var p=h.extend(g,p);h(p.container).delegate(q,"click",function(r){c(this,r,p)})};h.fn.open=function(p){var p=h.extend({},g,p);h(this).bind("click",function(q){c(this,q,p)});if(p.autoload){i(h(this).filter(":first"),p)}}})(jQuery);