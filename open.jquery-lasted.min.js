(function(h){var d={type:{self:"self",blank:"blank",iframe:"iframe",ajax:"ajax"},popup:{height:780,width:420},onview:null,uniqueIdentifier:"unique"};var g={type:d.type.self,container:"body",ajax:{name:"_openviewer",loading:{name:"_opencharger",content:"Please be patient, loading ...",enable:true},error:{name:"_openfailure",content:"An error was occured. Please to retry later.",enable:true},displayInline:false,toggle:true},iframe:{name:"_openbrowser",options:{src:"",scrolling:"auto",frameborder:0},loading:{name:"_openloader",content:"Please be patient, loading ...",enable:true},displayInline:false,domMaxSize:5},popup:{scrollbars:"yes",toolbar:"yes",location:"yes",directories:"yes",menubar:"yes",resizable:"yes",status:"yes",top:0,left:0,height:780,width:420},onExit:null,autoload:false};var i=function(p,o){if(null==h(p).data("_openid")){h(p).data("_openid","_open"+Math.floor((Math.random()*1001)+1))}o.name=h(p).data("_openid");if(h(p).hasClass(d.type.self)){type=d.type.self}else{if(h(p).hasClass(d.type.blank)){type=d.type.blank}else{if(h(p).hasClass(d.type.iframe)){type=d.type.iframe}else{if(h(p).hasClass(d.type.ajax)){type=d.type.ajax}else{type=o.type}}}}if(null!=(url=n(p,o))){switch(type){case d.type.ajax:return j(url,o);case d.type.iframe:return m(url,o);case d.type.blank:return f(url,o);case d.type.self:default:return k(url,o)}}};var j=function(o,p){a(p.name,p.ajax);if(0==h("#"+p.name).length){h("#"+p.ajax.name).append('<div id="'+p.name+'"></div>')}else{if(false==p.ajax.toggle){h("#"+p.ajax.name+" > div").hide()}}if(""==h("#"+p.name).html()){h("#"+p.name).hide().html(" ");return h.get(o,function(q){h("#"+p.name).html(q)}).success(function(){l(p.name,p.ajax,p.onExit)}).error(function(){if(p.ajax.error.enable){h("#"+p.ajax.error.name).show().delay(1000).hide()}})}return l(p.name,p.ajax,p.onExit)};var m=function(p,r){a(r.name,r.iframe);if(0==h("#"+r.name).length){var q=[];var o=h.extend({},r.iframe.options,{id:r.name});for(opts in o){q.push(opts+' = "'+o[opts]+'"')}var s=h("#"+r.iframe.name+" > iframe");if(r.iframe.domMaxSize<=s.length){s.filter(":first").remove()}h("#"+r.iframe.name).append("<iframe "+q.join(" ")+"></iframe>")}h("#"+r.iframe.name+" > iframe").hide();if(r.iframe.loading.enable){if(""==h("#"+r.name).attr("src")){return h("#"+r.name).attr("src",p).load(function(){l(r.name,r.iframe,r.onExit)})}}else{if(""==h("#"+r.name).attr("src")){h("#"+r.name).attr("src",p)}}return l(r.name,r.iframe,r.onExit)};var f=function(p,q){var o=q.popup;o.width=(screen.width*0.8);if(o.width<d.popup.height){q.popup.width=d.popup.height}o.height=(screen.height*0.8);if(o.height<d.popup.width){q.popup.height=d.popup.width}var r=[];for(opts in o){r.push(opts+"="+o[opts])}if(h.isFunction(q.onExit)){q.onExit(q.name)}return window.open(p,o.name,r.join(","))};var k=function(o,p){if(h.isFunction(p.onExit)){p.onExit(p.name)}return window.location.href=o};var c=function(p,q,o){q.preventDefault();i(p,o)};var a=function(p,o){d.onview=p;if(0==h("#"+o.name).length){h(document.body).append('<div id="'+o.name+'"></div>')}if(o.loading.enable){if(0==h("#"+o.loading.name).length){h(document.body).append('<div id="'+o.loading.name+'">'+o.loading.content+"</div>")}else{h("#"+o.loading.name).show()}}if("undefined"!=typeof o.error&&o.error.enable){if(0==h("#"+o.error.name).length){h(document.body).append('<div id="'+o.error.name+'">'+o.error.content+"</div>")}h("#"+o.error.name).hide()}};var l=function(p,o,q){if(d.onview!=p){return}if(o.loading.enable){h("#"+o.loading.name).hide()}if("undefined"!=typeof o.toggle&&o.toggle&&h("#"+p).is(":visible")){h("#"+p).hide()}else{if(o.displayInline){h("#"+p).show()}else{h("#"+p).css("display","block")}}if(h.isFunction(q)){q(p)}};var e=function(t){var q=new String();var p,o,u,s=new String();p="a";o="A";u="z";s="Z";var r=-1,v;while(r++<t.length-1){v=t.charCodeAt(r);if(v>=p.charCodeAt()&&v<=u.charCodeAt()){v=((v-p.charCodeAt()+13)%26)+p.charCodeAt()}else{if(v>=o.charCodeAt()&&v<=s.charCodeAt()){v=((v-o.charCodeAt()+13)%26)+o.charCodeAt()}}q+=String.fromCharCode(v)}return q};var n=function(p,o){if(null!=(url=b(p))){if(null!=h(p).data("arg")){url+=(-1!=url.indexOf("?")?"&":"?")+h(p).data("arg")}if(h(p).hasClass(d.uniqueIdentifier)){url+=(-1!=url.indexOf("?")?"&":"?")+"_i="+new Date().getTime()}}return url};var b=function(p){if("undefined"!==typeof h(p).attr("href")){return h(p).attr("href")}else{if("undefined"!==typeof h(p).data("url")){return h(p).data("url")}else{if("undefined"!==typeof h(p).data("erl")){return e(h(p).data("erl"))}else{if("undefined"!==typeof h(p).data("nrl")){var o=h(p).data("nrl");if(-1!==o.indexOf("uggc:")){return e(o)}return o}else{if("undefined"!==typeof h(p).data("irl")){return b(h("#"+h(p).data("irl")))}}}}}return null};h.open=function(p,o){var o=h.extend(g,o);h(o.container).delegate(p,"click",function(q){c(this,q,o)})};h.fn.open=function(o){var o=h.extend({},g,o);h(this).bind("click",function(p){c(this,p,o)});if(o.autoload){i(h(this).filter(":first"),o)}}})(jQuery);